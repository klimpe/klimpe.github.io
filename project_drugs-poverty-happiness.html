<html>
<head>
  <title>Data Journey: Drugs, poverty and happiness</title>
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico?">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/fontawesome.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <!-- <script src=”https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js”></script> -->
  <script>
    window.onload = function() {
    function highlightCurrentChapter() {
      // Get the list of chapters in the TOC
      var chapters = document.querySelectorAll('#toc li');

      // Find the current chapter by comparing the anchor element's href to the current URL
      var currentChapter = Array.prototype.find.call(chapters, function(chapter) {
        return chapter.querySelector('a').href == window.location.href;
      });

      // If a current chapter was found, add the "current" class to it
      if (currentChapter) {
        currentChapter.classList.add('current');
      }
    }
  }
    // Call the highlightCurrentChapter function when the page loads
    //window.addEventListener('load', highlightCurrentChapter);
  </script>
</head>
<body>
  <!-----NavigationBar----->
  <section id="nav-bar">
    <nav class="navbar navbar-expand-sm bg-body-tertiary sticky">
    <div class="container-fluid">
      <a class="navbar-brand" href="#"><img src="img/logo_blue.png">Data Journey</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html#slider">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="index.html#about">About</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Projects
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="project_drugs-poverty-happiness.html">Drugs, poverty and happiness</a></li>
              <!-- <li><a class="dropdown-item" href="#">Another action</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#">Something else here</a></li> -->
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled">Papers</a>
          </li>
        </ul>
        <!-- <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form> -->
      </div>
    </div>
  </nav>
  </section>
  <!----------TOC------------->
  <div class="container">
    <div class="row">
      <div class="col-md-3">
        <nav id="toc" class="flex-column nav mx-0">
          <ul class="nav-item outer">
            <li class="nav-link"><a href="#chapter-1-ask">1. Ask</a>
            <li class="nav-link"><a href="#chapter-2-prepare">2. Prepare</a></li>
            <li class="nav-link"><a href="#chapter-3-process">3. Process</a></li>
            <li class="nav-link"><a href="#chapter-4-analysis">4. Analyze</a></li>
              <ul class="nav-item">
                <li class="nav-link"><a href="#subchapter-4.1-type-viz">Types of Visualizations</a></li>
                <li class="nav-link"><a href="#subchapter-4.2-police-data">Analysis of Police Data</a></li>
                <li class="nav-link"><a href="#subchapter-4.3-new-metrics">Creating Additional Metrics</a></li>
                <li class="nav-link"><a href="#subchapter-4.4-survey-data">Analysis of Survey Data</a></li>
              </ul>
            </li>
            <li class="nav-link"><a href="#chapter-5-conclusion">5. Conclusion</a></li>
          </ul>
        </nav>
      </div>
      <!----------Article------------->
      <div class="col-md-9 article">
        <section id="chapter-1-ask" class="section">
          <h2 data-heading="1. Ask">1. Ask</h2>
          <ul>
            <li>What topic are you exploring?<br>
            The drug consumption and drug-related crimes at the country level, its relation to poverty and percieved happiness.</li>
            <li>What is the problem you are trying to solve?<br>
            The goal is to inform political decision-makers about what maximizes the happiness of the population.</li>
            <li>What metrics will you use to measure your data to achieve your objective?<br>
            Number of drug-related crimes (posession and dealing) per capita, happiness score, average rate of drug use during the last year</li>
            <li>Who are the stakeholders?<br>
            Political decision-makers.</li>
            <li>Who is your audience?<br>
            Political leaders and general public.</li>
          </ul>
          <p>Questions:<br>
          What factors (like happiness and poverty) are correlated with drug-related behaviour?</p>
        </section>
        <section id="chapter-2-prepare">
          <h2 data-heading="2. Prepare">2. Prepare</h2>
          <h3 data-heading="Finding the Datasets">Finding the Datasets</h3>
          <p>The data comes from 4 different sources.</p>
          <ul>
            <li>World Drug Report 2022 (WDR 2022)</li>
            <ul>
              <li>Drug-related offences</li>
              <li>Last year usage ratios per drug type</li>
            </ul>
            <li>Population by Country - 2020</li>
            <ul>
              <li>Population</li>
            </ul>
            <li>World Bank Poverty and Inequality Platform (PIP)
            <ul>
              <li>Poverty ratio</li>
            </ul>
            <li>World Happiness Report (2019)</li>
            <ul>
              <li>Happiness score</li>
              <li>Happiness rank</li>
            </ul>
          </ul>
        </section>
        <section id="chapter-3-process">
          <h2 data-heading="3. Process">3. Process</h2>
          <h3 data-heading="Data Preprocessing">Data Preprocessing</h3>
          <ol>
          <li>Convert <code>10.1_-_Drug_related_crimes.xlsx</code>  to `10.1_-_Drug_related_crimes.csv,</li>
          <li>Keep only sheet 2: `10.1_-_Drug_related_crimes</li>
          <li>Missing data: I want to extract only values for the year 2020 but some countries don't have records in 2020, so I use SQL to extract the <strong>most recent year</strong> <sup data-footnote-id="fnref-1-b6efabc080de551a" class="footnote-ref" id="fnref-1-b6efabc080de551a"><a href="#fn-1-b6efabc080de551a" class="footnote-link" target="_blank" rel="noopener">[1]</a></sup> available for these countries: <a data-href="Preprocessing Offences with SQL" href="Preprocessing Offences with SQL" class="internal-link" target="_blank" rel="noopener">Preprocessing Offences with SQL</a>. I got rid of unnecessary columns, leaving only <code>Country</code>, <code>Year</code>, <code>Use</code>, <code>Trafficking</code>, <code>Total</code></li>
          <li>After SQL processing I downloaded CSV from BigQuery as <code>Offences_raw.csv</code></li>
          <li>I detected missing values represented as empty cells in <code>Use</code>, <code>Trafficking</code> and <code>Total</code> columns and replaced the with the string "null".</li>
          <li>I downloaded population data by contry from <a aria-label-position="top" aria-label="https://www.kaggle.com/datasets/tanuprabhu/population-by-country-2020?select=population_by_country_2020.csv" rel="noopener" class="external-link" href="https://www.kaggle.com/datasets/tanuprabhu/population-by-country-2020?select=population_by_country_2020.csv" target="_blank">Kaggle: Population by Country - 2020</a></li>
          <li>I made sure that country names in <code>Offences</code> and <code>population_2020</code> tables are the same, I edited the names from the second table to match the first.</li>
          <li>Philipinnes occur two times in the <code>Offences</code> as "Phillipines 2016" and "Phillipines (the) 2020", I kept the first one as numbers of offences in the second are suspiciously low. Same naming inconsistency problem with Respublic of Moldova, Russian Federation, United Kingdom. Also, Turkey for 2020 was doubled as Türkiye for 2019. I kept the most recent data for all these cases.</li>
          <li>I used <code>XLOOKUP</code> function in Excel to aggregate data by inserting <code>Population</code> column from <code>population_2020</code> to the <code>Offences</code> table.</li>
          <li>I calculated the rate of  <code>Use</code>, <code>Trafficking</code> and <code>Total</code> offences per capita in percentage by dividing each one of them by the population and multiplying by 100. Thus, three new columns were created: <code>Use_per_capita</code>, <code>Trafficking_per_capita</code> and <code>Total_per_capita</code>.</li>
          <li>I extracted  the most recent data for each country in <a aria-label-position="top" aria-label="Poverty Data Source" data-href="Poverty Data Source" href="Poverty Data Source" class="internal-link" target="_blank" rel="noopener">poverty data</a> by using an <a aria-label-position="top" aria-label="Poverty Data Extraction" data-href="Poverty Data Extraction" href="Poverty Data Extraction" class="internal-link" target="_blank" rel="noopener">SQL query</a> in BigQuery. Only Purchasing Power Parity (PPP) for 2017 was selected, which means that the extreme poverty is defined by income or expenditure under $2.15 per day per person.</li>
          <li>The resulting table was added as a new sheet to the same Excel file <code>summary_drugs-poverty-happiness.xlsx</code>.</li>
          <li>I used XLOOKUP to integrate the poverty data from the column <code>headcount_ratio_international_povline</code> to the main summary table, replacing missing values by <code>null</code>.</li>
          <li>I manually changed France's data on drug offences to 2018, because the figure for 2020 which was selected previously was unrealistically low.</li>
          <li>I added <code>Happiness</code> and <code>Happiness_rank</code> columns by country for 2019 (the most recent available). Source: <a aria-label-position="top" aria-label="https://www.kaggle.com/datasets/unsdsn/world-happiness?select=2019.csv" rel="noopener" class="external-link" href="https://www.kaggle.com/datasets/unsdsn/world-happiness?select=2019.csv" target="_blank">Kaggle: World Happiness Report</a></li>
          </ol>
          <p>In the World Happiness Report Congo is divided to Congo (Brazzaville) and Congo (Kinshasa) with different happiness values for each. How to convey this in my per-country data? The adopted solution was to average these two values. This created another problem: what value to put in the <code>Happiness_rank</code>?</p>
        </section>
        <section id="chapter-4-analysis">
          <h2 data-heading="4. Analysis">4. Analysis</h2>
          <section id="subchapter-4.1-type-viz">
            <h3>Types of Visualizations</h3>
            <!--------Map: Total Drug Offences vs. Poverty----------->
            <div class='tableauPlaceholder' id='viz1673002249884' style='position: relative'>
              <noscript>
                <a href='#'><img alt='Total Drug Offences vs. Poverty ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MapOffencesvs_Poverty2&#47;1_rss.png' style='border: none' /></a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;MapOffencesvs_Poverty2' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MapOffencesvs_Poverty2&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
              var divElement = document.getElementById('viz1673002249884');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';
              vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <!---------Map: Use Drug Offences vs. Poverty------------>
            <div class='tableauPlaceholder' id='viz1673023078483' style='position: relative'>
              <noscript>
                <a href='#'><img alt='Use Offences vs. Poverty' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MapUsevs_Poverty2&#47;1_rss.png' style='border: none' /></a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;MapUsevs_Poverty2' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MapUsevs_Poverty2&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
              var divElement = document.getElementById('viz1673023078483');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <!--------Map: Trafficking Offences vs. Poverty---------->
            <div class='tableauPlaceholder' id='viz1673024515359' style='position: relative'>
              <noscript>
                <a href='#'><img alt='Trafficking Offences vs. Poverty ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MapTraffickingvs_Poverty2&#47;1_rss.png' style='border: none' /></a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;MapTraffickingvs_Poverty2' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MapTraffickingvs_Poverty2&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
              var divElement = document.getElementById('viz1673024515359');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <!-------Scatter: Offences vs. Poverty and Happiness-------->
            <div class='tableauPlaceholder' id='viz1673131810934' style='position: relative'>
              <noscript><a href='#'><img alt='Drug Offences vs. Poverty and Happiness ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;Scatter1&#47;1_rss.png' style='border: none' />
              </a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;Scatter1' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;Scatter1&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
              var divElement = document.getElementById('viz1673131810934');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <!-------Scatter: Use Offences vs. Poverty and Happiness-------->
            <div class='tableauPlaceholder' id='viz1673132301405' style='position: relative'>
              <noscript><a href='#'><img alt='Use Offences vs. Poverty and Happiness ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;Usevs_PovertyandHappiness_1&#47;1_rss.png' style='border: none' />
              </a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;Usevs_PovertyandHappiness_1' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;Usevs_PovertyandHappiness_1&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
              var divElement = document.getElementById('viz1673132301405');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';
              vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <!-------Scatter: Trafficking Offences vs. Poverty and Happiness-------->
            <div class='tableauPlaceholder' id='viz1673132432133' style='position: relative'>
              <noscript><a href='#'><img alt='Trafficking Offences vs. Poverty and Happiness ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;TraffickingvsPovertyandHappiness&#47;1_rss.png' style='border: none' />
              </a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;TraffickingvsPovertyandHappiness' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;TraffickingvsPovertyandHappiness&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
              var divElement = document.getElementById('viz1673132432133');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';
              vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <p>Metrics such as rate of possession-related offences, trafficking-related offences and total rate of drug related offences can tell us something about illegal drug market and society, especially if there are associated with such metrics as poverty rate or happiness score.</p>

            <p>To begin to make sense of the data, I represented drug-related crime rates on a world map along with the percentage of people living in extreme poverty. Two types of offences are (1) related to possession and use and (2) related to trafficking. Along with total drug offence rate, they gave rise to three maps shown above:
            <ul>
              <li><code>Total Drug Offences vs. Poverty</code></li>
              <li><code>Use Offences vs. Poverty</code></li>
              <li><code>Trafficking Offences vs. Poverty</code></li>
            </ul>
            The poverty rate is indicated by the color of circles. Blue corresponds to 0% (or to missing data), yellow to 0.9% and bright red to 82% of the country's population living with under $2.15 a day.</p>

            <p>Another type of plot I found useful is scatter plot of rate of a drug-related metric on the x-axis and of the inverse of extreme poverty percentage on the y-axis (so that the poorest remain down on the plot), using logarithmic scales on both axes. They also include the happiness score metric color-coding the reported level of happiness in the presented countries. In the context of police data, three such plots have been created:
            <ul>
              <li><code>Drug Offences vs. Poverty and Happiness</code></li>
              <li><code>Use Offences vs. Poverty and Happiness</code></li>
              <li><code>Trafficking Offences vs. Poverty and Happiness</code></li>
            </ul>
            </p>
          </section>
          <section id="subchapter-4.2-police-data">
            <h3>Analysis of the Police Data</h3>

            <p>On the <code>Use Offences vs. Poverty</code> and <code>Total Drug Offences vs. Poverty</code> maps, we can clearly see a cluster of high rate of registered use offences and total offences in the rich European countries.</p>

            <p>In absolute numbers in our data European countries and North America, richer parts of the world, which represent 33.3% of the countries in the dataset account for 447 931 trafficking offences amounting to 53.2% of world's trafficking cases.</p>

            <p>Usage and posession are more consistently reprimanded in the European part of the world, from 0.07% in Bulgaria to enormous 2.1% in Andorra. By contrast, in poor Sub-Saharan African countries the rate of police actions against drug users and drug trafficking is very low: from 0.00007% in Ghana to 0.008% in Central African Republic of offences being prosecuted. There are, however, some exceptions in cases of Zimbabwe, Botswana, Sudan and Zambia, where drug offence rate is higher. There, it ranges between 0.025% and 0.056% per person.</p>

            <p>On the map <code>Trafficking Offences vs. Poverty</code> and on the scatter plot <code>Trafficking Offences vs. Poverty and Happiness</code> we can see some poorer countries from other regions joining Europe. Indeed, if we focus exclusively on drug trafficking offences, filtering out the punished use, the geography widens to include some developing countries including Colombia, Dominican Republic, Chile, Peru, Zambia, Tunisia and Malaysia.</p>

            <p>The plot <code>Drug Offences vs. Poverty and Happiness</code>  and <code>Trafficking vs. Poverty and Happiness</code> reveal <strong>a negative correlation between registered drug-related offences and poverty</strong>, in other words, as we have already seen on the maps, there are way less offences in poor countries. Inversly, the lower the poverty rate, the more offences are registered.</p>

            <!--------Happiness metric------------>
            <p>Concurrently, the plot also seems to show a trend associating most of the "happier" contries (greener on the plot; mostly European, but also Israel and Morocco) with higher percentage of drug offences. Furthemore, countries with less than 1% of poverty and more than 0.5% of trafficking rate or more than 0.2% of total drug offence rate tend to have the highest happiness score. In the same time, countries with more than 5% of poverty are likely to be among the most unhappy, independent of their drug offence rates which can range between 0% for Ghana and 0.12% for Georgia. Tajikistan, Uzbekistan, Nepal and Colombia appear to be exeptions which report good happiness score despite poverty rate exceding 6% and relatively low registered offence rate.</p>

            <p>However, this kind of police data has its downsides when estimating country's drug use level using the rate of offences. It reflects the result of the actions of law enforsment institutions, which in their turn depend on political and cultural factors. We can easily imagine that in some countries "war on drugs" is not a priority. We can also imagine the existence of corrupt law enforcement officers who charge money in order to avoid to the offenders the court or an official fine. To see the fuller picture of drug use trends we need data of different origin, which is the subject of the next section.</p>
          </section>
          <section id="subchapter-4.3-new-metrics">
            <h3 data-heading="Creating Additional Metrics">Creating Additional Metrics</h3>

            <p><a href="https://www.unodc.org/unodc/en/data-and-analysis/world-drug-report-2022.html">The World Drugs Report 2022</a> provides us with a spreadsheet containing information about percentage of people having used drugs in the last year broken down by different types of drugs in the spreadsheet <code>1.2_-_Prevalence_of_drug_use_in_the_general_population_including_NPS_national_data.xlsx</code> provided by <a href="https://www.unodc.org/">UNODC</a> as a part of Statistical annex to the World Drug Report 2022. I decided to estimate general drug consumption from this data. But what function to use to aggregate the data? Sum is the first that comes to mind. But it has a problem: as people from these surveys could use more than one type of drug, it does not make sense to simply add the percentages across different types of drugs. That is why I decided to take <em>the average and the maximum across types of drugs</em> for the most recent year available to estimate countries' consumption level.</p>

            <p>I used <code>Best</code> columns from the sheets on common drugs and <code>Past_Year_Total</code> from the sheet on various so-called NPS (New Psychoactive Substances). Data about NPS is presented on a single sheet, so after deleting all the rows that do not contain my target metric <code>Past_Year_Total</code>, I separated it into one sheet per substance. Per country tables for each common drug type (9) and each NPS (12) became sheets of my <code>summary_drug-poverty-happiness.xlsx</code>. I aggregated data using XLOOKUP on the summary sheet and applied "average" and "maximum" aggregation functions. I named the columns <code>Average_last_year</code> and <code>Max_last_year</code> respectively. I also added <code>What is max</code> column to indicate which drug is the most popular in a given country.</p>
          </section>
          <section id="subchapter-4.4-survey-data">
            <h3>Analysis of Survey Data</h3>
            <!-------Map: Average Last Year Usage vs. Poverty-------->
            <div class='tableauPlaceholder' id='viz1673039469792'   style='position: relative'>
              <noscript>
                <a href='#'><img alt='Average Last Year Usage vs. Poverty ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MapAverageUsevs_Poverty2&#47;1_rss.png' style='border: none' /></a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;MapAverageUsevs_Poverty2' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MapAverageUsevs_Poverty2&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
            var divElement = document.getElementById('viz1673039469792');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';
              vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <!-------Map: Max Last Year Usage vs. Poverty-------->
            <div class='tableauPlaceholder' id='viz1673135052676' style='position: relative'>
              <noscript><a href='#'><img alt='Maximum Use Last Year vs. Poverty and Happiness ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MaxvsPovertyandHappiness&#47;1_rss.png' style='border: none' />
              </a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;MaxvsPovertyandHappiness' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MaxvsPovertyandHappiness&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
              var divElement = document.getElementById('viz1673135052676');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <!-------Scatter: Average Use Last Year vs. Poverty and Happiness------>
            <div class='tableauPlaceholder' id='viz1673132715978' style='position: relative'>
              <noscript><a href='#'><img alt='Average Use Last Year vs. Poverty and Happiness ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;AveragevsPovertyandHappiness&#47;1_rss.png' style='border: none' />
              </a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;AveragevsPovertyandHappiness' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;AveragevsPovertyandHappiness&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
              var divElement = document.getElementById('viz1673132715978');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';
              vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <!-------Scatter: Max Use Last Year vs. Poverty and Happiness------>
            <div class='tableauPlaceholder' id='viz1673133589175' style='position: relative'>
              <noscript><a href='#'><img alt='Maximum Use Last Year vs. Poverty and Happiness ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MaxvsPovertyandHappiness&#47;1_rss.png' style='border: none' />
              </a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;MaxvsPovertyandHappiness' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;MaxvsPovertyandHappiness&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
              var divElement = document.getElementById('viz1673133589175');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';
              vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <!---------Scatter: Poverty vs Happiness-------->
            <div class='tableauPlaceholder' id='viz1673134059088' style='position: relative'>
              <noscript><a href='#'><img alt='Poverty vs. Happiness ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;AveragevsPovertyandHappiness2_1&#47;1_rss.png' style='border: none' />
              </a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='DrugsPovertyandHappiness&#47;AveragevsPovertyandHappiness2_1' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Dr&#47;DrugsPovertyandHappiness&#47;AveragevsPovertyandHappiness2_1&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>
            <script type='text/javascript'>
              var divElement = document.getElementById('viz1673134059088');
              var vizElement = divElement.getElementsByTagName('object')[0];
              vizElement.style.width='90%';vizElement.style.height=(divElement.offsetWidth*0.55)+'px';
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
            </script>
            <p>It is obvious from the distributions in <code>Average Use Last Year vs. Poverty and Happiness</code> and in <code>Max Use Last Year vs. Poverty and Happiness</code> scatter plots that there is no relation between usage and poverty. On the one hand, usage can be high in both poorest countires (like Zambia, Madagascar, Haiti and Nigeria) and the countries less touched by poverty (for example France, Switzerland and Ireland), on the other hand, low usage occurs in the poorest countries with more than 10% of extreme poverty (Congo, Turkmenistan, Senegal) and the those with less than 1% of extreme poverty (Turkey, South Korea, Moldova). The same can be seen on the map <code>Average Last Year Usage vs. Poverty</code>, the distribution on which contrasts with maps based on police reports.</p>

            <p>Given information from the previous section we can conclude that there probably is a relation between police interventions against users and traffickants in poorer and wealthier countries, but there is no relation between poverty and actual drug use. The trend identified in the previous section is rooted in law enforcement practices. The police pays more attention to the drug-related offences in wealthier contries.</p>

            <p>In the same time there is probably a negative relationship between poverty and happiness. Countries with low poverty rate are more likely to be happy as it shows <code>Average Use Last Year vs Poverty and Happiness</code>  plot. We can add a sidenote that happier countries tend to have higher cannabis use rates as can be seen on the same plot: the greener the point (more than 0.9%), the higher is the cannabis use rate.</p>
          </section>
        </section>
        <section id="chapter-5-conclusion">
          <h2 data-heading="Conclusion">Conclusion</h2>
          <p>In conclusion, this study analyzed the relationship between drug consumption, drug-related crimes, poverty, and perceived happiness at the country level. The data for this study was gathered from multiple sources and preprocessed in order to properly analyze the correlations between these factors. The results of the analysis showed that there is a negative correlation between happiness and both drug-related crimes and poverty, and a <mark>positive correlation between happiness and drug use</mark>. These findings suggest that <mark>policies aimed at reducing drug-related crime</mark> and poverty may also lead to increased happiness in the population. These results can inform political decision-makers in their efforts to maximize the happiness of the population.</p>
        </section>
      </div>
    </div>
  </div>

    <section class="footnotes"><hr><ol>
      <li data-footnote-id="fn-1-b6efabc080de551a" id="fn-1-b6efabc080de551a">
      Alternatively, I could have used the average from all years that have data.
      <a href="#fnref-1-b6efabc080de551a" class="footnote-backref footnote-link" target="_blank" rel="noopener">↩︎</a>
      </li>
      </ol>
    </section>
  </div>
</body>
</html>
